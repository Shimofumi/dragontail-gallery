---
import type { MarkdownInstance, Page } from "astro";
import type { GetStaticPaths } from "astro";
import type { ArtworkFrontmatter } from '../../layouts/Artwork.astro';
import Layout from "../../layouts/Layout.astro";
import Pagination from "../../components/Pagination.astro";
import GalleryGrid from "../../components/GalleryGrid.astro";

const pageTitle: string = "gallery";

export const getStaticPaths = (({paginate}) => {
  	const artworks: MarkdownInstance<ArtworkFrontmatter>[] = Object.values(import.meta.glob('../picture/*.md', { eager: true }));
	artworks.sort((a, b) => {
		const aDate = new Date(a.frontmatter.date);
		const bDate = new Date(b.frontmatter.date);
		return bDate.getTime() - aDate.getTime()
	});

	const artWorksParams = artworks.map((work) => {
		return { work };
	});
    return paginate(artWorksParams, { pageSize: 9})
}) satisfies GetStaticPaths;

const { page } = Astro.props;
---

<Layout title={pageTitle}>
	<GalleryGrid page={page} />
    <Pagination page={page} path="/gallery" />
</Layout>
